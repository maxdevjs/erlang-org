<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Allow pinning of website on windows -->
    <meta name="application-name" content="Erlang.org">
    <meta name="msapplication-tooltip" content="The official home of the Erlang Programming Language">
    <meta name="msapplication-starturl" content="/erlang-org/" >

    <!-- Make the site look nicer on facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Erlang.org">
    <meta property="og:title" content="Welcome to Erlang.org">
    <meta property="og:description" content="The official home of the Erlang Programming Language">
    <meta property="og:image" content="https://erlang.github.io/erlang-org/assets/img/erlang-228x200.png">
    <meta property="og:image:secure_url" content="https://erlang.github.io/erlang-org/assets/img/erlang-228x200.png">
    <meta property="og:url" content="https://erlang.github.io/erlang-org/">

    <!-- Twitter metadata -->
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Index" />
    <meta name="twitter:site" content="@erlang_org" />

    <!-- Rich data for google search -->
    <script type="application/ld+json">
{"@type":"WebSite","url":"https://erlang.org/","headline":"Eep 0024 - Erlang/OTP","name":"Erlang.org","sameAs":["https://twitter.com/erlang_org","https://github.com/erlang/otp"],"@context":"https://schema.org"}</script>

    <title>Eep 0024 - Erlang/OTP</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- tells iOS browsers to not show telephone numbers as links -->
    <meta name="format-detection" content="telephone=no">

    <meta name="application-name" content="Erlang.org">
    <meta name="description" content="The official home of the Erlang Programming Language">
    <meta name="keywords" content="Erlang programming language functional parallel distributed documentation download community">
    <!-- https://www.rssboard.org/rss-autodiscovery -->
    <link rel="alternate" type="application/atom+xml" title="News Atom Feed" href="https://erlang.github.io/erlang-org/news.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Atom Feed" href="https://erlang.github.io/erlang-org/blog.xml" />
    
    <link rel="stylesheet" href="/erlang-org/assets/css/main.css">
</head>

<body>
    <header class="navbar navbar-expand-lg navbar-light bg-body">
        <nav class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="/erlang-org/"><img
                    src="/erlang-org/assets/img/erlang.png" class="img-fluid" width="60" alt="Erlang.org main page"/></a>
            <div class="collapse navbar-collapse fw-bold" id="navbarSupportedContent">
                <ul class="navbar-nav text-uppercase me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/downloads">Download</a></li>
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/docs">Documentation</a></li>
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/community">Community</a></li>
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/news">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/blog">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/eep">EEP</a></li>
                    <li class="nav-item"><a class="nav-link" href="/erlang-org/about">About</a></li>
                </ul>
                <form class="d-flex" role="search" method="post" action="https://duckduckgo.com/?kg=p"
                    onsubmit="document.getElementById('searchq').value = document.getElementById('searchfield').value + ' site:erlang.org'; return true;">
                    <input type="hidden" id="searchq" name="q" class="hidden" />
                    <input class="form-control me-2" id="searchfield" type="search" placeholder="Search erlang.org"
                        aria-label="Search">
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                </form>
            </div>
        </nav>
    </header>
    <div class="container border-top pt-4">
    <div class="row-lg">
        <div class="col-lg-10 offset-lg-1">
            <div class="card">
                <div class="card-body">
                    <dl class="mb-0 dl-single">
                        <dt>Author:</dt>
                        <dd>
                            Richard A. O&#39;Keefe &lt;ok(at)cs(dot)otago(dot)ac(dot)nz&gt;
                            
                            
                        </dd>
                        
                        <dt>Status:</dt>
                        <dd>Final/R12B-5 Proposal is implemented in OTP release R12B-5</dd>
                        <dt>Type:</dt>
                        <dd>Standards Track</dd>
                        
                        
                        <dt>Created:</dt>
                        <dd>22-Sep-2008</dd>
                        
                        <dt>Erlang-Version:</dt>
                        <dd>R12B-4</dd>
                        
                        
                        
                        
                    </dl>
                </div>
            </div>
            <div class="border-top mt-4">
                <h2 id="eep-24-functions-may-be-named-using-fn-in-all-module-attributes">EEP 24: Functions may be named using <code class="language-plaintext highlighter-rouge">F/N</code> in all module attributes</h2>

<h1 id="abstract">Abstract</h1>

<p>Programmers will be allowed to name functions using the
<code class="language-plaintext highlighter-rouge">F/N</code> form (currently restricted to) <code class="language-plaintext highlighter-rouge">-export</code> and <code class="language-plaintext highlighter-rouge">-import</code>
in any module attribute.  The parser will convert this
to the existing <code class="language-plaintext highlighter-rouge">{F,N}</code> form so that downstream tools will
be unaffected.</p>

<h1 id="specification">Specification</h1>

<p>In any module attribute the form <code class="language-plaintext highlighter-rouge">F/N</code> (where <code class="language-plaintext highlighter-rouge">F</code> is an atom and <code class="language-plaintext highlighter-rouge">N</code> is
a non-negative integer) should be converted to <code class="language-plaintext highlighter-rouge">{F,N}</code>, provided
that it is not in an expression that would be evaluated.</p>

<p>Other occurrences of <code class="language-plaintext highlighter-rouge">X/Y</code> are not addressed by this EEP.
In particular, occurrences of <code class="language-plaintext highlighter-rouge">X/Y</code> in <code class="language-plaintext highlighter-rouge">-record</code> or <code class="language-plaintext highlighter-rouge">-enum</code>
declarations would be evaluated, so are not affected.</p>

<h1 id="motivation">Motivation</h1>

<p>Compare</p>

<div class="language-erlang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">-</span><span class="ni">compile</span><span class="p">({</span><span class="n">inline</span><span class="p">,</span>
    <span class="p">[{</span><span class="n">ukeymerge3_12</span><span class="p">,</span><span class="mi">13</span><span class="p">},</span> <span class="p">{</span><span class="n">ukeymerge3_21</span><span class="p">,</span><span class="mi">13</span><span class="p">},</span>
     <span class="p">{</span><span class="n">rukeymerge3_12a</span><span class="p">,</span><span class="mi">11</span><span class="p">},</span> <span class="p">{</span><span class="n">rukeymerge3_21a</span><span class="p">,</span><span class="mi">13</span><span class="p">},</span>
     <span class="p">{</span><span class="n">rukeymerge3_12b</span><span class="p">,</span><span class="mi">12</span><span class="p">},</span> <span class="p">{</span><span class="n">rukeymerge3_21b</span><span class="p">,</span><span class="mi">12</span><span class="p">}]}).</span>
</code></pre></div></div>

<div class="language-erlang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">-</span><span class="ni">deprecated</span><span class="p">(</span>
    <span class="p">[{</span><span class="n">new_set</span><span class="p">,</span><span class="mi">0</span><span class="p">},{</span><span class="n">set_to_list</span><span class="p">,</span><span class="mi">1</span><span class="p">},{</span><span class="n">list_to_set</span><span class="p">,</span><span class="mi">1</span><span class="p">},{</span><span class="n">subset</span><span class="p">,</span><span class="mi">2</span><span class="p">}]).</span>
</code></pre></div></div>

<p>with</p>

<div class="language-erlang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">-</span><span class="ni">compile</span><span class="p">({</span><span class="n">inline</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">rukeymerge3_12a</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span>
    <span class="n">rukeymerge3_12b</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">rukeymerge3_21a</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> 
    <span class="n">rukeymerge3_21b</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">ukeymerge3_12</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span>
    <span class="n">ukeymerge3_21</span><span class="o">/</span><span class="mi">13</span><span class="p">]}).</span>
</code></pre></div></div>

<div class="language-erlang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">-</span><span class="ni">deprecated</span><span class="p">([</span>
    <span class="n">list_to_set</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">new_set</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">set_to_list</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">subset</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span>
</code></pre></div></div>

<p>The improvement in readability is noteworthy, especially if
authors switch to the Prolog practice of putting one <code class="language-plaintext highlighter-rouge">F/N</code> form
per line in alphabetic order in such lists.</p>

<p>The improvement in consistency is worth having:  it’s no longer a
case of <code class="language-plaintext highlighter-rouge">new_set/0</code> in an <code class="language-plaintext highlighter-rouge">-export</code> or <code class="language-plaintext highlighter-rouge">-import</code> module attribute but
<code class="language-plaintext highlighter-rouge">{new_set,0}</code> in a <code class="language-plaintext highlighter-rouge">-deprecated</code> module attribute, it’s the same in
all module attributes, making it easier to find those that mention
a particular function.</p>

<h1 id="rationale">Rationale</h1>

<p>Module attributes that contain real expressions, such as <code class="language-plaintext highlighter-rouge">-record</code>
(and, if it is accepted, <code class="language-plaintext highlighter-rouge">-enum</code>) require a certain amount of care.
I did consider allowing the <code class="language-plaintext highlighter-rouge">F/N</code> notation everywhere; after all,
an atom cannot be divided by an integer.  However, with the
<code class="language-plaintext highlighter-rouge">fun F/N</code> form available, there are these days very few occasions
to refer to a function as <code class="language-plaintext highlighter-rouge">{F,N}</code> in an expression.</p>

<p>Otherwise, <code class="language-plaintext highlighter-rouge">F/N</code> occurrences in <code class="language-plaintext highlighter-rouge">-export</code> and <code class="language-plaintext highlighter-rouge">-import</code> attributes are
currently converted to tuples (by farity_list), so this is just a
small matter of extending the notion elsewhere.  I cannot imagine
why this wasn’t done years ago.</p>

<h1 id="backwards-compatibility">Backwards Compatibility</h1>

<p>There are currently no attributes where <code class="language-plaintext highlighter-rouge">F/N</code> is accepted,
is not part of an expression to be evaluated, and does not
signify a function, and those where it does signify a function
already treat it as an <code class="language-plaintext highlighter-rouge">{F,N}</code> tuple.</p>

<p>No existing source code can be affected.</p>

<p>Progams using home-brew front ends instead of the Erlang
syntax tools, such as ones that want to preserve white
space, comments, and so on, will have to be extended by
their maintainers to recognise the new form.  It is
already the case that <code class="language-plaintext highlighter-rouge">{fred,3}</code> may be written in two
different ways in Erlang source form: <code class="language-plaintext highlighter-rouge">{fred,+3}</code> is also
allowed.  So such programs already have to cope with
multiple source forms with the same abstract form, and
this merely adds one more variant.</p>

<p>Programs generating Erlang source code should some day
be revised to generate the new form, but since the old form
is not being removed and not (in order to preserve the
value of recent books) even being deprecated, need not be.</p>

<h1 id="reference-implementation">Reference Implementation</h1>

<p>A single clause needs to be added to the <code class="language-plaintext highlighter-rouge">normalise/1</code>
function in the parse.yrl file:</p>

<div class="language-erlang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">%% Name/Arity case
</span><span class="nf">normalise</span><span class="p">({</span><span class="n">op</span><span class="p">,_,</span><span class="n">'/'</span><span class="p">,{</span><span class="n">atom</span><span class="p">,_,</span><span class="nv">F</span><span class="p">},{</span><span class="n">integer</span><span class="p">,_,</span><span class="nv">I</span><span class="p">}})</span> <span class="k">when</span> <span class="nv">I</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">-&gt;</span>
   <span class="p">{</span><span class="nv">F</span><span class="p">,</span><span class="nv">I</span><span class="p">};</span>
</code></pre></div></div>

<p>just before the final clause, which raises an exception.
A context diff is provided <a href="eep-0024-1.diff" title="Diff to apply to parse.yrl">eep-0024-1.diff</a>.</p>

<h1 id="copyright">Copyright</h1>

<p>This document has been placed in the public domain.</p>


            </div>
        </div>
    </div>
</div>
<script src="/erlang-org/assets/js/prismjs/prism.js"></script>
<script src="/erlang-org/assets/js/prismjs/components/prism-erlang.js"></script>
    <footer class="container-fluid footer text-center border-top border-bottom">
        <div>
            <a href="/erlang-org/downloads.html" title="DOWNLOAD"><img src="/erlang-org/assets/img/download.png"></a>
        </div>
        <div>
            <a href="http://www.github.com/erlang/otp"><img
                    src="/erlang-org/assets/img/GitHub-Mark-32px.png"></a>
        </div>
        
        <div>
            <a href="http://www.twitter.com/erlang_org"><img src="/erlang-org/assets/img/twitter.png"
                    width="32"></a>
        </div>
    </footer>
    <script src="/erlang-org/assets/js/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>